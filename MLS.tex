\documentclass[10pt,a4paper]{report}
\NeedsTeXFormat{LaTeX2e}
\usepackage[utf8]{inputenc}
\input{preamble.tex}

% Define title for use by LaTeXML.
% An extended title is defined separately in the 'titlepage'.
\newcommand{\mlsversion}{3.5-dev}
\title{Modelica\textsuperscript{\textregistered} Language Specification Version \mlsversion}

\date{\today}

\author{Modelica Association}

% The other parts start on new page and could be optionally included

\begin{document}
% Title
% Need to somehow work around the issue that LaTeXML puts the abstract before the title page, see LaTeXML issue:
% - https://github.com/brucemiller/LaTeXML/issues/1395
\begin{titlepage}
% Note that things like \vspace and linebreaks with height (\\[2\baselineskip]) are lost in generated HTML;
% only line breaks and paragraph breaks survive.
\addtolength{\parskip}{\baselineskip}% Lots of space between paragraphs on the PDF title page.
\begin{center}
\ifpdf
\includegraphics[width=8cm]{Modelica_Language}
\else
\includegraphics[width=15cm]{Modelica_Language}
\fi
\vspace{3cm}

\huge
Modelica\textsuperscript{\textregistered} -- A Unified Object-Oriented Language for~Systems Modeling

Language Specification

Version \mlsversion

\vspace{3cm}% This has no effect in the generated HTML.

\Large
\makeatletter
\@date

\@author
\makeatother
\end{center}
\end{titlepage}

% Add new Modelica Language logotype
% The header ruler looks odd as Modelica Language define a natural line that is further up
% We also need to fill the vertical space on the right
% Not using page numbers in right-header, since we usually refer to sections.
%
% Using nouppercase since it is seems more normal for the sections, and is also
% needed for over-determined connectors (as it would otherwise overflow)
\cleardoublepage
\pagestyle{fancy}
\rhead{Modelica Language Specification 3.5-dev\\ \nouppercase{\rightmark} \vspace{1mm}}
\lhead{\includegraphics[height=6.5mm]{Modelica_Language}}
\renewcommand{\headrulewidth}{0.0pt}

% Abstract
\input{chapters/abstract}

\tableofcontents

% Preface
\input{chapters/preface}

% Introduction
\input{chapters/introduction}

% Lexical Structure
\input{chapters/lexicalstructure}

% Operators and Expressions
\input{chapters/operatorsandexpressions}

% Classes, Predefined Types, and Declarations
\input{chapters/classes}

% Scoping, Name Lookup, and Flattening
\input{chapters/scoping}

% Interface or Type Relationships
\input{chapters/interface}

% Inheritance, Modification, and Redeclaration
\input{chapters/inheritance}

% Equations
\input{chapters/equations}

% Connectors and Connections
\input{chapters/connectors}

% Arrays
\input{chapters/arrays}

% Statements and Algorithm Chapters
\input{chapters/statements}

% Functions
\input{chapters/functions}

% Packages
\input{chapters/packages}

% Overloaded Operators
\input{chapters/overloaded}

% Stream Connectors
\input{chapters/stream}

% Synchronous Language Elements
\input{chapters/synchronous}

% State Machines
\input{chapters/statemachines}

% Annotations
\input{chapters/annotations}

% Unit Expressions
\input{chapters/unitexpressions}

% The Modelica Standard Library
\input{chapters/library}

\appendix
% https://tex.stackexchange.com/questions/370384/change-toc-depth-mid-document
\addtocontents{toc}{\setcounter{tocdepth}{0}}

% Glossary
\input{chapters/glossary}

% Modelica Concrete Syntax
\input{chapters/syntax}

% Modelica DAE Representation}
\input{chapters/dae}

% Derivation of Stream Equations
\input{chapters/derivationofstream}

% Modelica Revision History
\input{chapters/revisions}

% Literature
\input{chapters/literature}
\end{document}
